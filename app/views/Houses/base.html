#{extends 'main.html' /}
#{get 'moreSubpageStyles' /}
#{set 'moreStyles'}
<link rel="stylesheet" type="text/css" href="../public/stylesheets/base.css">
<style type="text/css">
	.nav-side li>a{
		color:#EC9508;
	}	
	.thumbnail{
		padding: 0;
		border: none;
		margin: 0;
	}
	.price{
		color:#f60;
	}

	ul.sub li{
		display: inline-block;
	}
</style>
 #{/set}

 		
<div class="main-container container-fluid">
		<div class="row">
		  <section class="col-md-10 col-md-offset-1 col-xs-12">
		  	<div class="col-md-8">

				#{doLayout /}
			</div>
		  	<div class="col-md-4 col-xs-12">
		  		<aside class="aside">
		  			<ul class="nav-side">
		  				<li><a href="@{Houses.showHouses}">我要租房</a></li>
		  				<li><a href="@{Houses.addHouse}">我要出租</a></li>
		  			</ul>
		  			<form action="@{Houses.showHouses}"  role="form">
						<input name="searchKey" type="text" class="form-control" >
						<button type="submit" class="btn btn-default">搜索</button>
					</form>
					<div >
						<h3>附近房源</h3>
						<ul>
							#{list items:baseHouseList,as:'house'}
							<li>
								<a href="@{Houses.showHouseInfo(house.id)}">${house.community}${house.bedRoom}房${house.livingRoom}室${house.bathRoom}卫</a>
							</li>
							#{/list}
						</ul>
					</div>
		  		</aside>
		  	</div>
		  </section>
		</div>
	</div>
		#{set "moreScripts"}
			<script type="text/javascript" src="../public/javascripts/base.js">	</script>
			<script type="text/javascript">
				var oInput = document.querySelectorAll('.panel-body input');
				var choice = document.querySelectorAll('.chose-type');
				var price =  document.querySelectorAll('#price a');
				var i ;
				for(i=0;i<oInput.length;i++){
					oInput[i].onkeyup = function(){
						this.value = this.value.replace(/[^\d]/g,"");
					}
				}
				for(i=1;i<price.length;i++){
					price[i].index = i;
					price[i].onclick = function(){
						var link = this.innerHTML.split("-");
							for(var n =0;n<2;n++){
								oInput[n].value = "";
								if(this.index ==1) oInput[1].value=parseInt(link[0]);
								else{
									if(link[n]) oInput[n].value = parseInt(link[n]);
								}
							}
						}
					}

			</script>
		#{/set}
		#{get "moreSubpageScripts"/}